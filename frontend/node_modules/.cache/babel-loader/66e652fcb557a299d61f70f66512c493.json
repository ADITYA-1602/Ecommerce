{"ast":null,"code":"import _toConsumableArray from \"C:\\\\Users\\\\hp\\\\OneDrive\\\\Desktop\\\\SE PROJECT\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"C:\\\\Users\\\\hp\\\\OneDrive\\\\Desktop\\\\SE PROJECT\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\hp\\\\OneDrive\\\\Desktop\\\\SE PROJECT\\\\frontend\\\\src\\\\component\\\\Admin\\\\UpdateProduct.js\";\n\nimport React, { Fragment, useEffect, useState } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { clearErrors, updateProduct, getProductDetails } from \"../../actions/productAction\";\nimport { useAlert } from \"react-alert\";\nimport { Button } from \"@material-ui/core\";\nimport MetaData from \"../layout/MetaData\";\nimport AccountTreeIcon from \"@material-ui/icons/AccountTree\";\nimport DescriptionIcon from \"@material-ui/icons/Description\";\nimport StorageIcon from \"@material-ui/icons/Storage\";\nimport SpellcheckIcon from \"@material-ui/icons/Spellcheck\";\nimport AttachMoneyIcon from \"@material-ui/icons/AttachMoney\";\nimport SideBar from \"./Sidebar\";\nimport { UPDATE_PRODUCT_RESET } from \"../../constants/productConstants\";\n\nvar UpdateProduct = function UpdateProduct(_ref) {\n  var history = _ref.history,\n      match = _ref.match;\n  var dispatch = useDispatch();\n  var alert = useAlert();\n\n  var _useSelector = useSelector(function (state) {\n    return state.productDetails;\n  }),\n      error = _useSelector.error,\n      product = _useSelector.product;\n\n  var _useSelector2 = useSelector(function (state) {\n    return state.product;\n  }),\n      loading = _useSelector2.loading,\n      updateError = _useSelector2.error,\n      isUpdated = _useSelector2.isUpdated;\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      name = _useState2[0],\n      setName = _useState2[1];\n\n  var _useState3 = useState(0),\n      _useState4 = _slicedToArray(_useState3, 2),\n      price = _useState4[0],\n      setPrice = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      _useState6 = _slicedToArray(_useState5, 2),\n      description = _useState6[0],\n      setDescription = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      category = _useState8[0],\n      setCategory = _useState8[1];\n\n  var _useState9 = useState(0),\n      _useState10 = _slicedToArray(_useState9, 2),\n      Stock = _useState10[0],\n      setStock = _useState10[1];\n\n  var _useState11 = useState([]),\n      _useState12 = _slicedToArray(_useState11, 2),\n      images = _useState12[0],\n      setImages = _useState12[1];\n\n  var _useState13 = useState([]),\n      _useState14 = _slicedToArray(_useState13, 2),\n      oldImages = _useState14[0],\n      setOldImages = _useState14[1];\n\n  var _useState15 = useState([]),\n      _useState16 = _slicedToArray(_useState15, 2),\n      imagesPreview = _useState16[0],\n      setImagesPreview = _useState16[1];\n\n  var categories = [\"Laptop\", \"Footwear\", \"Bottom\", \"Tops\", \"Attire\", \"Camera\", \"SmartPhones\"];\n  var productId = match.params.id;\n  useEffect(function () {\n    if (product && product._id !== productId) {\n      dispatch(getProductDetails(productId));\n    } else {\n      setName(product.name);\n      setDescription(product.description);\n      setPrice(product.price);\n      setCategory(product.category);\n      setStock(product.Stock);\n      setOldImages(product.images);\n    }\n\n    if (error) {\n      alert.error(error);\n      dispatch(clearErrors());\n    }\n\n    if (updateError) {\n      alert.error(updateError);\n      dispatch(clearErrors());\n    }\n\n    if (isUpdated) {\n      alert.success(\"Product Updated Successfully\");\n      history.push(\"/admin/products\");\n      dispatch({\n        type: UPDATE_PRODUCT_RESET\n      });\n    }\n  }, [dispatch, alert, error, history, isUpdated, productId, product, updateError]);\n\n  var updateProductSubmitHandler = function updateProductSubmitHandler(e) {\n    e.preventDefault();\n    var myForm = new FormData();\n    myForm.set(\"name\", name);\n    myForm.set(\"price\", price);\n    myForm.set(\"description\", description);\n    myForm.set(\"category\", category);\n    myForm.set(\"Stock\", Stock);\n    images.forEach(function (image) {\n      myForm.append(\"images\", image);\n    });\n    dispatch(updateProduct(productId, myForm));\n  };\n\n  var updateProductImagesChange = function updateProductImagesChange(e) {\n    var files = Array.from(e.target.files);\n    setImages([]);\n    setImagesPreview([]);\n    setOldImages([]);\n    files.forEach(function (file) {\n      var reader = new FileReader();\n\n      reader.onload = function () {\n        if (reader.readyState === 2) {\n          setImagesPreview(function (old) {\n            return [].concat(_toConsumableArray(old), [reader.result]);\n          });\n          setImages(function (old) {\n            return [].concat(_toConsumableArray(old), [reader.result]);\n          });\n        }\n      };\n\n      reader.readAsDataURL(file);\n    });\n  };\n\n  return /*#__PURE__*/React.createElement(Fragment, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(MetaData, {\n    title: \"Create Product\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"dashboard\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(SideBar, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"newProductContainer\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"form\", {\n    className: \"createProductForm\",\n    encType: \"multipart/form-data\",\n    onSubmit: updateProductSubmitHandler,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 13\n    }\n  }, \"Create Product\"), /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(SpellcheckIcon, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"text\",\n    placeholder: \"Product Name\",\n    required: true,\n    value: name,\n    onChange: function onChange(e) {\n      return setName(e.target.value);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(AttachMoneyIcon, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"number\",\n    placeholder: \"Price\",\n    required: true,\n    onChange: function onChange(e) {\n      return setPrice(e.target.value);\n    },\n    value: price,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(DescriptionIcon, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"textarea\", {\n    placeholder: \"Product Description\",\n    value: description,\n    onChange: function onChange(e) {\n      return setDescription(e.target.value);\n    },\n    cols: \"30\",\n    rows: \"1\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(AccountTreeIcon, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"select\", {\n    value: category,\n    onChange: function onChange(e) {\n      return setCategory(e.target.value);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    value: \"\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 17\n    }\n  }, \"Choose Category\"), categories.map(function (cate) {\n    return /*#__PURE__*/React.createElement(\"option\", {\n      key: cate,\n      value: cate,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 181,\n        columnNumber: 19\n      }\n    }, cate);\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(StorageIcon, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"input\", {\n    type: \"number\",\n    placeholder: \"Stock\",\n    required: true,\n    onChange: function onChange(e) {\n      return setStock(e.target.value);\n    },\n    value: Stock,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"createProductFormFile\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    name: \"avatar\",\n    accept: \"image/*\",\n    onChange: updateProductImagesChange,\n    multiple: true,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"createProductFormImage\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 13\n    }\n  }, oldImages && oldImages.map(function (image, index) {\n    return /*#__PURE__*/React.createElement(\"img\", {\n      key: index,\n      src: image.url,\n      alt: \"Old Product Preview\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 19\n      }\n    });\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"createProductFormImage\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 13\n    }\n  }, imagesPreview.map(function (image, index) {\n    return /*#__PURE__*/React.createElement(\"img\", {\n      key: index,\n      src: image,\n      alt: \"Product Preview\",\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 17\n      }\n    });\n  })), /*#__PURE__*/React.createElement(Button, {\n    id: \"createProductBtn\",\n    type: \"submit\",\n    disabled: loading ? true : false,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 13\n    }\n  }, \"Create\")))));\n};\n\nexport default UpdateProduct;","map":{"version":3,"sources":["C:/Users/hp/OneDrive/Desktop/SE PROJECT/frontend/src/component/Admin/UpdateProduct.js"],"names":["React","Fragment","useEffect","useState","useSelector","useDispatch","clearErrors","updateProduct","getProductDetails","useAlert","Button","MetaData","AccountTreeIcon","DescriptionIcon","StorageIcon","SpellcheckIcon","AttachMoneyIcon","SideBar","UPDATE_PRODUCT_RESET","UpdateProduct","history","match","dispatch","alert","state","productDetails","error","product","loading","updateError","isUpdated","name","setName","price","setPrice","description","setDescription","category","setCategory","Stock","setStock","images","setImages","oldImages","setOldImages","imagesPreview","setImagesPreview","categories","productId","params","id","_id","success","push","type","updateProductSubmitHandler","e","preventDefault","myForm","FormData","set","forEach","image","append","updateProductImagesChange","files","Array","from","target","file","reader","FileReader","onload","readyState","old","result","readAsDataURL","value","map","cate","index","url"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,EAAqCC,QAArC,QAAqD,OAArD;AACA,SAASC,WAAT,EAAsBC,WAAtB,QAAyC,aAAzC;AACA,SACEC,WADF,EAEEC,aAFF,EAGEC,iBAHF,QAIO,6BAJP;AAKA,SAASC,QAAT,QAAyB,aAAzB;AACA,SAASC,MAAT,QAAuB,mBAAvB;AACA,OAAOC,QAAP,MAAqB,oBAArB;AACA,OAAOC,eAAP,MAA4B,gCAA5B;AACA,OAAOC,eAAP,MAA4B,gCAA5B;AACA,OAAOC,WAAP,MAAwB,4BAAxB;AACA,OAAOC,cAAP,MAA2B,+BAA3B;AACA,OAAOC,eAAP,MAA4B,gCAA5B;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,SAASC,oBAAT,QAAqC,kCAArC;;AAEA,IAAMC,aAAa,GAAG,SAAhBA,aAAgB,OAAwB;AAAA,MAArBC,OAAqB,QAArBA,OAAqB;AAAA,MAAZC,KAAY,QAAZA,KAAY;AAC5C,MAAMC,QAAQ,GAAGjB,WAAW,EAA5B;AACA,MAAMkB,KAAK,GAAGd,QAAQ,EAAtB;;AAF4C,qBAIjBL,WAAW,CAAC,UAACoB,KAAD;AAAA,WAAWA,KAAK,CAACC,cAAjB;AAAA,GAAD,CAJM;AAAA,MAIpCC,KAJoC,gBAIpCA,KAJoC;AAAA,MAI7BC,OAJ6B,gBAI7BA,OAJ6B;;AAAA,sBAUxCvB,WAAW,CAAC,UAACoB,KAAD;AAAA,WAAWA,KAAK,CAACG,OAAjB;AAAA,GAAD,CAV6B;AAAA,MAO1CC,OAP0C,iBAO1CA,OAP0C;AAAA,MAQnCC,WARmC,iBAQ1CH,KAR0C;AAAA,MAS1CI,SAT0C,iBAS1CA,SAT0C;;AAAA,kBAYpB3B,QAAQ,CAAC,EAAD,CAZY;AAAA;AAAA,MAYrC4B,IAZqC;AAAA,MAY/BC,OAZ+B;;AAAA,mBAalB7B,QAAQ,CAAC,CAAD,CAbU;AAAA;AAAA,MAarC8B,KAbqC;AAAA,MAa9BC,QAb8B;;AAAA,mBAcN/B,QAAQ,CAAC,EAAD,CAdF;AAAA;AAAA,MAcrCgC,WAdqC;AAAA,MAcxBC,cAdwB;;AAAA,mBAeZjC,QAAQ,CAAC,EAAD,CAfI;AAAA;AAAA,MAerCkC,QAfqC;AAAA,MAe3BC,WAf2B;;AAAA,mBAgBlBnC,QAAQ,CAAC,CAAD,CAhBU;AAAA;AAAA,MAgBrCoC,KAhBqC;AAAA,MAgB9BC,QAhB8B;;AAAA,oBAiBhBrC,QAAQ,CAAC,EAAD,CAjBQ;AAAA;AAAA,MAiBrCsC,MAjBqC;AAAA,MAiB7BC,SAjB6B;;AAAA,oBAkBVvC,QAAQ,CAAC,EAAD,CAlBE;AAAA;AAAA,MAkBrCwC,SAlBqC;AAAA,MAkB1BC,YAlB0B;;AAAA,oBAmBFzC,QAAQ,CAAC,EAAD,CAnBN;AAAA;AAAA,MAmBrC0C,aAnBqC;AAAA,MAmBtBC,gBAnBsB;;AAqB5C,MAAMC,UAAU,GAAG,CACjB,QADiB,EAEjB,UAFiB,EAGjB,QAHiB,EAIjB,MAJiB,EAKjB,QALiB,EAMjB,QANiB,EAOjB,aAPiB,CAAnB;AAUA,MAAMC,SAAS,GAAG3B,KAAK,CAAC4B,MAAN,CAAaC,EAA/B;AAEAhD,EAAAA,SAAS,CAAC,YAAM;AACd,QAAIyB,OAAO,IAAIA,OAAO,CAACwB,GAAR,KAAgBH,SAA/B,EAA0C;AACxC1B,MAAAA,QAAQ,CAACd,iBAAiB,CAACwC,SAAD,CAAlB,CAAR;AACD,KAFD,MAEO;AACLhB,MAAAA,OAAO,CAACL,OAAO,CAACI,IAAT,CAAP;AACAK,MAAAA,cAAc,CAACT,OAAO,CAACQ,WAAT,CAAd;AACAD,MAAAA,QAAQ,CAACP,OAAO,CAACM,KAAT,CAAR;AACAK,MAAAA,WAAW,CAACX,OAAO,CAACU,QAAT,CAAX;AACAG,MAAAA,QAAQ,CAACb,OAAO,CAACY,KAAT,CAAR;AACAK,MAAAA,YAAY,CAACjB,OAAO,CAACc,MAAT,CAAZ;AACD;;AACD,QAAIf,KAAJ,EAAW;AACTH,MAAAA,KAAK,CAACG,KAAN,CAAYA,KAAZ;AACAJ,MAAAA,QAAQ,CAAChB,WAAW,EAAZ,CAAR;AACD;;AAED,QAAIuB,WAAJ,EAAiB;AACfN,MAAAA,KAAK,CAACG,KAAN,CAAYG,WAAZ;AACAP,MAAAA,QAAQ,CAAChB,WAAW,EAAZ,CAAR;AACD;;AAED,QAAIwB,SAAJ,EAAe;AACbP,MAAAA,KAAK,CAAC6B,OAAN,CAAc,8BAAd;AACAhC,MAAAA,OAAO,CAACiC,IAAR,CAAa,iBAAb;AACA/B,MAAAA,QAAQ,CAAC;AAAEgC,QAAAA,IAAI,EAAEpC;AAAR,OAAD,CAAR;AACD;AACF,GA1BQ,EA0BN,CACDI,QADC,EAEDC,KAFC,EAGDG,KAHC,EAIDN,OAJC,EAKDU,SALC,EAMDkB,SANC,EAODrB,OAPC,EAQDE,WARC,CA1BM,CAAT;;AAqCA,MAAM0B,0BAA0B,GAAG,SAA7BA,0BAA6B,CAACC,CAAD,EAAO;AACxCA,IAAAA,CAAC,CAACC,cAAF;AAEA,QAAMC,MAAM,GAAG,IAAIC,QAAJ,EAAf;AAEAD,IAAAA,MAAM,CAACE,GAAP,CAAW,MAAX,EAAmB7B,IAAnB;AACA2B,IAAAA,MAAM,CAACE,GAAP,CAAW,OAAX,EAAoB3B,KAApB;AACAyB,IAAAA,MAAM,CAACE,GAAP,CAAW,aAAX,EAA0BzB,WAA1B;AACAuB,IAAAA,MAAM,CAACE,GAAP,CAAW,UAAX,EAAuBvB,QAAvB;AACAqB,IAAAA,MAAM,CAACE,GAAP,CAAW,OAAX,EAAoBrB,KAApB;AAEAE,IAAAA,MAAM,CAACoB,OAAP,CAAe,UAACC,KAAD,EAAW;AACxBJ,MAAAA,MAAM,CAACK,MAAP,CAAc,QAAd,EAAwBD,KAAxB;AACD,KAFD;AAGAxC,IAAAA,QAAQ,CAACf,aAAa,CAACyC,SAAD,EAAYU,MAAZ,CAAd,CAAR;AACD,GAfD;;AAiBA,MAAMM,yBAAyB,GAAG,SAA5BA,yBAA4B,CAACR,CAAD,EAAO;AACvC,QAAMS,KAAK,GAAGC,KAAK,CAACC,IAAN,CAAWX,CAAC,CAACY,MAAF,CAASH,KAApB,CAAd;AAEAvB,IAAAA,SAAS,CAAC,EAAD,CAAT;AACAI,IAAAA,gBAAgB,CAAC,EAAD,CAAhB;AACAF,IAAAA,YAAY,CAAC,EAAD,CAAZ;AAEAqB,IAAAA,KAAK,CAACJ,OAAN,CAAc,UAACQ,IAAD,EAAU;AACtB,UAAMC,MAAM,GAAG,IAAIC,UAAJ,EAAf;;AAEAD,MAAAA,MAAM,CAACE,MAAP,GAAgB,YAAM;AACpB,YAAIF,MAAM,CAACG,UAAP,KAAsB,CAA1B,EAA6B;AAC3B3B,UAAAA,gBAAgB,CAAC,UAAC4B,GAAD;AAAA,gDAAaA,GAAb,IAAkBJ,MAAM,CAACK,MAAzB;AAAA,WAAD,CAAhB;AACAjC,UAAAA,SAAS,CAAC,UAACgC,GAAD;AAAA,gDAAaA,GAAb,IAAkBJ,MAAM,CAACK,MAAzB;AAAA,WAAD,CAAT;AACD;AACF,OALD;;AAOAL,MAAAA,MAAM,CAACM,aAAP,CAAqBP,IAArB;AACD,KAXD;AAYD,GAnBD;;AAqBA,sBACE,oBAAC,QAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,QAAD;AAAU,IAAA,KAAK,EAAC,gBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEE;AAAK,IAAA,SAAS,EAAC,WAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,OAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEE;AAAK,IAAA,SAAS,EAAC,qBAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AACE,IAAA,SAAS,EAAC,mBADZ;AAEE,IAAA,OAAO,EAAC,qBAFV;AAGE,IAAA,QAAQ,EAAEd,0BAHZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAKE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBALF,eAOE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,cAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEE;AACE,IAAA,IAAI,EAAC,MADP;AAEE,IAAA,WAAW,EAAC,cAFd;AAGE,IAAA,QAAQ,MAHV;AAIE,IAAA,KAAK,EAAExB,IAJT;AAKE,IAAA,QAAQ,EAAE,kBAACyB,CAAD;AAAA,aAAOxB,OAAO,CAACwB,CAAC,CAACY,MAAF,CAASS,KAAV,CAAd;AAAA,KALZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CAPF,eAiBE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,eAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEE;AACE,IAAA,IAAI,EAAC,QADP;AAEE,IAAA,WAAW,EAAC,OAFd;AAGE,IAAA,QAAQ,MAHV;AAIE,IAAA,QAAQ,EAAE,kBAACrB,CAAD;AAAA,aAAOtB,QAAQ,CAACsB,CAAC,CAACY,MAAF,CAASS,KAAV,CAAf;AAAA,KAJZ;AAKE,IAAA,KAAK,EAAE5C,KALT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CAjBF,eA4BE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,eAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAGE;AACE,IAAA,WAAW,EAAC,qBADd;AAEE,IAAA,KAAK,EAAEE,WAFT;AAGE,IAAA,QAAQ,EAAE,kBAACqB,CAAD;AAAA,aAAOpB,cAAc,CAACoB,CAAC,CAACY,MAAF,CAASS,KAAV,CAArB;AAAA,KAHZ;AAIE,IAAA,IAAI,EAAC,IAJP;AAKE,IAAA,IAAI,EAAC,GALP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHF,CA5BF,eAwCE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,eAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEE;AACE,IAAA,KAAK,EAAExC,QADT;AAEE,IAAA,QAAQ,EAAE,kBAACmB,CAAD;AAAA,aAAOlB,WAAW,CAACkB,CAAC,CAACY,MAAF,CAASS,KAAV,CAAlB;AAAA,KAFZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBAIE;AAAQ,IAAA,KAAK,EAAC,EAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAJF,EAKG9B,UAAU,CAAC+B,GAAX,CAAe,UAACC,IAAD;AAAA,wBACd;AAAQ,MAAA,GAAG,EAAEA,IAAb;AAAmB,MAAA,KAAK,EAAEA,IAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OACGA,IADH,CADc;AAAA,GAAf,CALH,CAFF,CAxCF,eAuDE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE,oBAAC,WAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,eAEE;AACE,IAAA,IAAI,EAAC,QADP;AAEE,IAAA,WAAW,EAAC,OAFd;AAGE,IAAA,QAAQ,MAHV;AAIE,IAAA,QAAQ,EAAE,kBAACvB,CAAD;AAAA,aAAOhB,QAAQ,CAACgB,CAAC,CAACY,MAAF,CAASS,KAAV,CAAf;AAAA,KAJZ;AAKE,IAAA,KAAK,EAAEtC,KALT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CAvDF,eAkEE;AAAK,IAAA,EAAE,EAAC,uBAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AACE,IAAA,IAAI,EAAC,MADP;AAEE,IAAA,IAAI,EAAC,QAFP;AAGE,IAAA,MAAM,EAAC,SAHT;AAIE,IAAA,QAAQ,EAAEyB,yBAJZ;AAKE,IAAA,QAAQ,MALV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADF,CAlEF,eA4EE;AAAK,IAAA,EAAE,EAAC,wBAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGrB,SAAS,IACRA,SAAS,CAACmC,GAAV,CAAc,UAAChB,KAAD,EAAQkB,KAAR;AAAA,wBACZ;AAAK,MAAA,GAAG,EAAEA,KAAV;AAAiB,MAAA,GAAG,EAAElB,KAAK,CAACmB,GAA5B;AAAiC,MAAA,GAAG,EAAC,qBAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADY;AAAA,GAAd,CAFJ,CA5EF,eAmFE;AAAK,IAAA,EAAE,EAAC,wBAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KACGpC,aAAa,CAACiC,GAAd,CAAkB,UAAChB,KAAD,EAAQkB,KAAR;AAAA,wBACjB;AAAK,MAAA,GAAG,EAAEA,KAAV;AAAiB,MAAA,GAAG,EAAElB,KAAtB;AAA6B,MAAA,GAAG,EAAC,iBAAjC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,MADiB;AAAA,GAAlB,CADH,CAnFF,eAyFE,oBAAC,MAAD;AACE,IAAA,EAAE,EAAC,kBADL;AAEE,IAAA,IAAI,EAAC,QAFP;AAGE,IAAA,QAAQ,EAAElC,OAAO,GAAG,IAAH,GAAU,KAH7B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAzFF,CADF,CAFF,CAFF,CADF;AA2GD,CAvND;;AAyNA,eAAeT,aAAf","sourcesContent":["import React, { Fragment, useEffect, useState } from \"react\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport {\n  clearErrors,\n  updateProduct,\n  getProductDetails,\n} from \"../../actions/productAction\";\nimport { useAlert } from \"react-alert\";\nimport { Button } from \"@material-ui/core\";\nimport MetaData from \"../layout/MetaData\";\nimport AccountTreeIcon from \"@material-ui/icons/AccountTree\";\nimport DescriptionIcon from \"@material-ui/icons/Description\";\nimport StorageIcon from \"@material-ui/icons/Storage\";\nimport SpellcheckIcon from \"@material-ui/icons/Spellcheck\";\nimport AttachMoneyIcon from \"@material-ui/icons/AttachMoney\";\nimport SideBar from \"./Sidebar\";\nimport { UPDATE_PRODUCT_RESET } from \"../../constants/productConstants\";\n\nconst UpdateProduct = ({ history, match }) => {\n  const dispatch = useDispatch();\n  const alert = useAlert();\n\n  const { error, product } = useSelector((state) => state.productDetails);\n\n  const {\n    loading,\n    error: updateError,\n    isUpdated,\n  } = useSelector((state) => state.product);\n\n  const [name, setName] = useState(\"\");\n  const [price, setPrice] = useState(0);\n  const [description, setDescription] = useState(\"\");\n  const [category, setCategory] = useState(\"\");\n  const [Stock, setStock] = useState(0);\n  const [images, setImages] = useState([]);\n  const [oldImages, setOldImages] = useState([]);\n  const [imagesPreview, setImagesPreview] = useState([]);\n\n  const categories = [\n    \"Laptop\",\n    \"Footwear\",\n    \"Bottom\",\n    \"Tops\",\n    \"Attire\",\n    \"Camera\",\n    \"SmartPhones\",\n  ];\n\n  const productId = match.params.id;\n\n  useEffect(() => {\n    if (product && product._id !== productId) {\n      dispatch(getProductDetails(productId));\n    } else {\n      setName(product.name);\n      setDescription(product.description);\n      setPrice(product.price);\n      setCategory(product.category);\n      setStock(product.Stock);\n      setOldImages(product.images);\n    }\n    if (error) {\n      alert.error(error);\n      dispatch(clearErrors());\n    }\n\n    if (updateError) {\n      alert.error(updateError);\n      dispatch(clearErrors());\n    }\n\n    if (isUpdated) {\n      alert.success(\"Product Updated Successfully\");\n      history.push(\"/admin/products\");\n      dispatch({ type: UPDATE_PRODUCT_RESET });\n    }\n  }, [\n    dispatch,\n    alert,\n    error,\n    history,\n    isUpdated,\n    productId,\n    product,\n    updateError,\n  ]);\n\n  const updateProductSubmitHandler = (e) => {\n    e.preventDefault();\n\n    const myForm = new FormData();\n\n    myForm.set(\"name\", name);\n    myForm.set(\"price\", price);\n    myForm.set(\"description\", description);\n    myForm.set(\"category\", category);\n    myForm.set(\"Stock\", Stock);\n\n    images.forEach((image) => {\n      myForm.append(\"images\", image);\n    });\n    dispatch(updateProduct(productId, myForm));\n  };\n\n  const updateProductImagesChange = (e) => {\n    const files = Array.from(e.target.files);\n\n    setImages([]);\n    setImagesPreview([]);\n    setOldImages([]);\n\n    files.forEach((file) => {\n      const reader = new FileReader();\n\n      reader.onload = () => {\n        if (reader.readyState === 2) {\n          setImagesPreview((old) => [...old, reader.result]);\n          setImages((old) => [...old, reader.result]);\n        }\n      };\n\n      reader.readAsDataURL(file);\n    });\n  };\n\n  return (\n    <Fragment>\n      <MetaData title=\"Create Product\" />\n      <div className=\"dashboard\">\n        <SideBar />\n        <div className=\"newProductContainer\">\n          <form\n            className=\"createProductForm\"\n            encType=\"multipart/form-data\"\n            onSubmit={updateProductSubmitHandler}\n          >\n            <h1>Create Product</h1>\n\n            <div>\n              <SpellcheckIcon />\n              <input\n                type=\"text\"\n                placeholder=\"Product Name\"\n                required\n                value={name}\n                onChange={(e) => setName(e.target.value)}\n              />\n            </div>\n            <div>\n              <AttachMoneyIcon />\n              <input\n                type=\"number\"\n                placeholder=\"Price\"\n                required\n                onChange={(e) => setPrice(e.target.value)}\n                value={price}\n              />\n            </div>\n\n            <div>\n              <DescriptionIcon />\n\n              <textarea\n                placeholder=\"Product Description\"\n                value={description}\n                onChange={(e) => setDescription(e.target.value)}\n                cols=\"30\"\n                rows=\"1\"\n              ></textarea>\n            </div>\n\n            <div>\n              <AccountTreeIcon />\n              <select\n                value={category}\n                onChange={(e) => setCategory(e.target.value)}\n              >\n                <option value=\"\">Choose Category</option>\n                {categories.map((cate) => (\n                  <option key={cate} value={cate}>\n                    {cate}\n                  </option>\n                ))}\n              </select>\n            </div>\n\n            <div>\n              <StorageIcon />\n              <input\n                type=\"number\"\n                placeholder=\"Stock\"\n                required\n                onChange={(e) => setStock(e.target.value)}\n                value={Stock}\n              />\n            </div>\n\n            <div id=\"createProductFormFile\">\n              <input\n                type=\"file\"\n                name=\"avatar\"\n                accept=\"image/*\"\n                onChange={updateProductImagesChange}\n                multiple\n              />\n            </div>\n\n            <div id=\"createProductFormImage\">\n              {oldImages &&\n                oldImages.map((image, index) => (\n                  <img key={index} src={image.url} alt=\"Old Product Preview\" />\n                ))}\n            </div>\n\n            <div id=\"createProductFormImage\">\n              {imagesPreview.map((image, index) => (\n                <img key={index} src={image} alt=\"Product Preview\" />\n              ))}\n            </div>\n\n            <Button\n              id=\"createProductBtn\"\n              type=\"submit\"\n              disabled={loading ? true : false}\n            >\n              Create\n            </Button>\n          </form>\n        </div>\n      </div>\n    </Fragment>\n  );\n};\n\nexport default UpdateProduct;\n"]},"metadata":{},"sourceType":"module"}