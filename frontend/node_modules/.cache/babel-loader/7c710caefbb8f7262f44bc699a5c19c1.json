{"ast":null,"code":"import _slicedToArray from \"C:\\\\Users\\\\hp\\\\OneDrive\\\\Desktop\\\\SE PROJECT\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\hp\\\\OneDrive\\\\Desktop\\\\SE PROJECT\\\\frontend\\\\src\\\\component\\\\Product\\\\ProductDetails.js\";\n\nimport React, { Fragment, useEffect, useState } from \"react\";\nimport Carousel from \"react-material-ui-carousel\";\nimport \"./ProductDetails.css\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport { clearErrors, getProductDetails, newReview } from \"../../actions/productAction\";\nimport ReviewCard from \"./ReviewCard.js\";\nimport Loader from \"../layout/Loader/Loader\";\nimport { useAlert } from \"react-alert\";\nimport MetaData from \"../layout/MetaData\";\nimport { addItemsToCart } from \"../../actions/cartAction\";\nimport { Dialog, DialogActions, DialogContent, DialogTitle, Button } from \"@material-ui/core\";\nimport { Rating } from \"@material-ui/lab\";\nimport { NEW_REVIEW_RESET } from \"../../constants/productConstants\";\n\nvar ProductDetails = function ProductDetails(_ref) {\n  var match = _ref.match;\n  var dispatch = useDispatch();\n  var alert = useAlert();\n\n  var _useSelector = useSelector(function (state) {\n    return state.productDetails;\n  }),\n      product = _useSelector.product,\n      loading = _useSelector.loading,\n      error = _useSelector.error;\n\n  var _useSelector2 = useSelector(function (state) {\n    return state.newReview;\n  }),\n      success = _useSelector2.success,\n      reviewError = _useSelector2.error;\n\n  var options = {\n    size: \"large\",\n    value: product.ratings,\n    readOnly: true,\n    precision: 0.5\n  };\n\n  var _useState = useState(1),\n      _useState2 = _slicedToArray(_useState, 2),\n      quantity = _useState2[0],\n      setQuantity = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      open = _useState4[0],\n      setOpen = _useState4[1];\n\n  var _useState5 = useState(0),\n      _useState6 = _slicedToArray(_useState5, 2),\n      rating = _useState6[0],\n      setRating = _useState6[1];\n\n  var _useState7 = useState(\"\"),\n      _useState8 = _slicedToArray(_useState7, 2),\n      comment = _useState8[0],\n      setComment = _useState8[1];\n\n  var increaseQuantity = function increaseQuantity() {\n    if (product.Stock <= quantity) return;\n    var qty = quantity + 1;\n    setQuantity(qty);\n  };\n\n  var decreaseQuantity = function decreaseQuantity() {\n    if (1 >= quantity) return;\n    var qty = quantity - 1;\n    setQuantity(qty);\n  };\n\n  var addToCartHandler = function addToCartHandler() {\n    dispatch(addItemsToCart(match.params.id, quantity));\n    alert.success(\"Item Added To Cart\");\n  };\n\n  var submitReviewToggle = function submitReviewToggle() {\n    open ? setOpen(false) : setOpen(true);\n  };\n\n  var reviewSubmitHandler = function reviewSubmitHandler() {\n    var myForm = new FormData();\n    myForm.set(\"rating\", rating);\n    myForm.set(\"comment\", comment);\n    myForm.set(\"productId\", match.params.id);\n    dispatch(newReview(myForm));\n    setOpen(false);\n  };\n\n  useEffect(function () {\n    if (error) {\n      alert.error(error);\n      dispatch(clearErrors());\n    }\n\n    if (reviewError) {\n      alert.error(reviewError);\n      dispatch(clearErrors());\n    }\n\n    if (success) {\n      alert.success(\"Review Submitted Successfully\");\n      dispatch({\n        type: NEW_REVIEW_RESET\n      });\n    }\n\n    dispatch(getProductDetails(match.params.id));\n  }, [dispatch, match.params.id, error, alert, reviewError, success]);\n  return /*#__PURE__*/React.createElement(Fragment, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 5\n    }\n  }, loading ? /*#__PURE__*/React.createElement(Loader, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 9\n    }\n  }) : /*#__PURE__*/React.createElement(Fragment, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 107,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(MetaData, {\n    title: \"\".concat(product.name, \" -- ECOMMERCE\"),\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"ProductDetails\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Carousel, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 15\n    }\n  }, product.images && product.images.map(function (item, i) {\n    return /*#__PURE__*/React.createElement(\"img\", {\n      className: \"CarouselImage\",\n      key: i,\n      src: item.url,\n      alt: \"\".concat(i, \" Slide\"),\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 21\n      }\n    });\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"detailsBlock-1\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 17\n    }\n  }, product.name), /*#__PURE__*/React.createElement(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 17\n    }\n  }, \"Product # \", product._id)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"detailsBlock-2\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Rating, Object.assign({}, options, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"span\", {\n    className: \"detailsBlock-2-span\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 17\n    }\n  }, \" \", \"(\", product.numOfReviews, \" Reviews)\")), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"detailsBlock-3\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 17\n    }\n  }, \"\\u20B9\".concat(product.price)), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"detailsBlock-3-1\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"detailsBlock-3-1-1\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: decreaseQuantity,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 21\n    }\n  }, \"-\"), /*#__PURE__*/React.createElement(\"input\", {\n    readOnly: true,\n    type: \"number\",\n    value: quantity,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 21\n    }\n  }), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: increaseQuantity,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 21\n    }\n  }, \"+\")), /*#__PURE__*/React.createElement(\"button\", {\n    disabled: product.Stock < 1 ? true : false,\n    onClick: addToCartHandler,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 19\n    }\n  }, \"Add to Cart\")), /*#__PURE__*/React.createElement(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 17\n    }\n  }, \"Status:\", /*#__PURE__*/React.createElement(\"b\", {\n    className: product.Stock < 1 ? \"redColor\" : \"greenColor\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 19\n    }\n  }, product.Stock < 1 ? \"OutOfStock\" : \"InStock\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"detailsBlock-4\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 15\n    }\n  }, \"Description : \", /*#__PURE__*/React.createElement(\"p\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 31\n    }\n  }, product.description)), /*#__PURE__*/React.createElement(\"button\", {\n    onClick: submitReviewToggle,\n    className: \"submitReview\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 15\n    }\n  }, \"Submit Review\"))), /*#__PURE__*/React.createElement(\"h3\", {\n    className: \"reviewsHeading\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 11\n    }\n  }, \"REVIEWS\"), /*#__PURE__*/React.createElement(Dialog, {\n    \"aria-labelledby\": \"simple-dialog-title\",\n    open: open,\n    onClose: submitReviewToggle,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(DialogTitle, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 13\n    }\n  }, \"Submit Review\"), /*#__PURE__*/React.createElement(DialogContent, {\n    className: \"submitDialog\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Rating, {\n    onChange: function onChange(e) {\n      return setRating(e.target.value);\n    },\n    value: rating,\n    size: \"large\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 15\n    }\n  }), /*#__PURE__*/React.createElement(\"textarea\", {\n    className: \"submitDialogTextArea\",\n    cols: \"30\",\n    rows: \"5\",\n    value: comment,\n    onChange: function onChange(e) {\n      return setComment(e.target.value);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 15\n    }\n  })), /*#__PURE__*/React.createElement(DialogActions, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: submitReviewToggle,\n    color: \"secondary\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 15\n    }\n  }, \"Cancel\"), /*#__PURE__*/React.createElement(Button, {\n    onClick: reviewSubmitHandler,\n    color: \"primary\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 15\n    }\n  }, \"Submit\"))), product.reviews && product.reviews[0] ? /*#__PURE__*/React.createElement(\"div\", {\n    className: \"reviews\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 13\n    }\n  }, product.reviews && product.reviews.map(function (review) {\n    return /*#__PURE__*/React.createElement(ReviewCard, {\n      key: review._id,\n      review: review,\n      __self: _this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 207,\n        columnNumber: 19\n      }\n    });\n  })) : /*#__PURE__*/React.createElement(\"p\", {\n    className: \"noReviews\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 13\n    }\n  }, \"No Reviews Yet\")));\n};\n\nexport default ProductDetails;","map":{"version":3,"sources":["C:/Users/hp/OneDrive/Desktop/SE PROJECT/frontend/src/component/Product/ProductDetails.js"],"names":["React","Fragment","useEffect","useState","Carousel","useSelector","useDispatch","clearErrors","getProductDetails","newReview","ReviewCard","Loader","useAlert","MetaData","addItemsToCart","Dialog","DialogActions","DialogContent","DialogTitle","Button","Rating","NEW_REVIEW_RESET","ProductDetails","match","dispatch","alert","state","productDetails","product","loading","error","success","reviewError","options","size","value","ratings","readOnly","precision","quantity","setQuantity","open","setOpen","rating","setRating","comment","setComment","increaseQuantity","Stock","qty","decreaseQuantity","addToCartHandler","params","id","submitReviewToggle","reviewSubmitHandler","myForm","FormData","set","type","name","images","map","item","i","url","_id","numOfReviews","price","description","e","target","reviews","review"],"mappings":"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","sourcesContent":["import React, { Fragment, useEffect, useState } from \"react\";\nimport Carousel from \"react-material-ui-carousel\";\nimport \"./ProductDetails.css\";\nimport { useSelector, useDispatch } from \"react-redux\";\nimport {\n  clearErrors,\n  getProductDetails,\n  newReview,\n} from \"../../actions/productAction\";\nimport ReviewCard from \"./ReviewCard.js\";\nimport Loader from \"../layout/Loader/Loader\";\nimport { useAlert } from \"react-alert\";\nimport MetaData from \"../layout/MetaData\";\nimport { addItemsToCart } from \"../../actions/cartAction\";\nimport {\n  Dialog,\n  DialogActions,\n  DialogContent,\n  DialogTitle,\n  Button,\n} from \"@material-ui/core\";\nimport { Rating } from \"@material-ui/lab\";\nimport { NEW_REVIEW_RESET } from \"../../constants/productConstants\";\n\nconst ProductDetails = ({ match }) => {\n  const dispatch = useDispatch();\n  const alert = useAlert();\n\n  const { product, loading, error } = useSelector(\n    (state) => state.productDetails\n  );\n\n  const { success, error: reviewError } = useSelector(\n    (state) => state.newReview\n  );\n\n  const options = {\n    size: \"large\",\n    value: product.ratings,\n    readOnly: true,\n    precision: 0.5,\n  };\n\n  const [quantity, setQuantity] = useState(1);\n  const [open, setOpen] = useState(false);\n  const [rating, setRating] = useState(0);\n  const [comment, setComment] = useState(\"\");\n\n  const increaseQuantity = () => {\n    if (product.Stock <= quantity) return;\n\n    const qty = quantity + 1;\n    setQuantity(qty);\n  };\n\n  const decreaseQuantity = () => {\n    if (1 >= quantity) return;\n\n    const qty = quantity - 1;\n    setQuantity(qty);\n  };\n\n  const addToCartHandler = () => {\n    dispatch(addItemsToCart(match.params.id, quantity));\n    alert.success(\"Item Added To Cart\");\n  };\n\n  const submitReviewToggle = () => {\n    open ? setOpen(false) : setOpen(true);\n  };\n\n  const reviewSubmitHandler = () => {\n    const myForm = new FormData();\n\n    myForm.set(\"rating\", rating);\n    myForm.set(\"comment\", comment);\n    myForm.set(\"productId\", match.params.id);\n\n    dispatch(newReview(myForm));\n\n    setOpen(false);\n  };\n\n  useEffect(() => {\n    if (error) {\n      alert.error(error);\n      dispatch(clearErrors());\n    }\n\n    if (reviewError) {\n      alert.error(reviewError);\n      dispatch(clearErrors());\n    }\n\n    if (success) {\n      alert.success(\"Review Submitted Successfully\");\n      dispatch({ type: NEW_REVIEW_RESET });\n    }\n    dispatch(getProductDetails(match.params.id));\n  }, [dispatch, match.params.id, error, alert, reviewError, success]);\n\n  return (\n    <Fragment>\n      {loading ? (\n        <Loader />\n      ) : (\n        <Fragment>\n          <MetaData title={`${product.name} -- ECOMMERCE`} />\n          <div className=\"ProductDetails\">\n            <div>\n              <Carousel>\n                {product.images &&\n                  product.images.map((item, i) => (\n                    <img\n                      className=\"CarouselImage\"\n                      key={i}\n                      src={item.url}\n                      alt={`${i} Slide`}\n                    />\n                  ))}\n              </Carousel>\n            </div>\n\n            <div>\n              <div className=\"detailsBlock-1\">\n                <h2>{product.name}</h2>\n                <p>Product # {product._id}</p>\n              </div>\n              <div className=\"detailsBlock-2\">\n                <Rating {...options} />\n                <span className=\"detailsBlock-2-span\">\n                  {\" \"}\n                  ({product.numOfReviews} Reviews)\n                </span>\n              </div>\n              <div className=\"detailsBlock-3\">\n                <h1>{`â‚¹${product.price}`}</h1>\n                <div className=\"detailsBlock-3-1\">\n                  <div className=\"detailsBlock-3-1-1\">\n                    <button onClick={decreaseQuantity}>-</button>\n                    <input readOnly type=\"number\" value={quantity} />\n                    <button onClick={increaseQuantity}>+</button>\n                  </div>\n                  <button\n                    disabled={product.Stock < 1 ? true : false}\n                    onClick={addToCartHandler}\n                  >\n                    Add to Cart\n                  </button>\n                </div>\n\n                <p>\n                  Status:\n                  <b className={product.Stock < 1 ? \"redColor\" : \"greenColor\"}>\n                    {product.Stock < 1 ? \"OutOfStock\" : \"InStock\"}\n                  </b>\n                </p>\n              </div>\n\n              <div className=\"detailsBlock-4\">\n                Description : <p>{product.description}</p>\n              </div>\n\n              <button onClick={submitReviewToggle} className=\"submitReview\">\n                Submit Review\n              </button>\n            </div>\n          </div>\n\n          <h3 className=\"reviewsHeading\">REVIEWS</h3>\n\n          <Dialog\n            aria-labelledby=\"simple-dialog-title\"\n            open={open}\n            onClose={submitReviewToggle}\n          >\n            <DialogTitle>Submit Review</DialogTitle>\n            <DialogContent className=\"submitDialog\">\n              <Rating\n                onChange={(e) => setRating(e.target.value)}\n                value={rating}\n                size=\"large\"\n              />\n\n              <textarea\n                className=\"submitDialogTextArea\"\n                cols=\"30\"\n                rows=\"5\"\n                value={comment}\n                onChange={(e) => setComment(e.target.value)}\n              ></textarea>\n            </DialogContent>\n            <DialogActions>\n              <Button onClick={submitReviewToggle} color=\"secondary\">\n                Cancel\n              </Button>\n              <Button onClick={reviewSubmitHandler} color=\"primary\">\n                Submit\n              </Button>\n            </DialogActions>\n          </Dialog>\n\n          {product.reviews && product.reviews[0] ? (\n            <div className=\"reviews\">\n              {product.reviews &&\n                product.reviews.map((review) => (\n                  <ReviewCard key={review._id} review={review} />\n                ))}\n            </div>\n          ) : (\n            <p className=\"noReviews\">No Reviews Yet</p>\n          )}\n        </Fragment>\n      )}\n    </Fragment>\n  );\n};\n\nexport default ProductDetails;\n"]},"metadata":{},"sourceType":"module"}